<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Calend√°rio Acad√™mico Interativo</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
<style>
  /* ‚îÄ‚îÄ‚îÄ VARI√ÅVEIS & TEMAS ‚îÄ‚îÄ‚îÄ */
  :root {
    /* Cores Padr√£o (Dark Mode) */
    --bg-color: #0f172a;
    --bg-gradient-1: rgba(59, 130, 246, 0.08);
    --bg-gradient-2: rgba(239, 68, 68, 0.05);
    
    --card-bg: rgba(30, 41, 59, 0.7);
    --card-hover: rgba(255, 255, 255, 0.05);
    --card-border: rgba(255, 255, 255, 0.08);
    
    --text-main: #f1f5f9;
    --text-muted: #94a3b8;
    --text-inverse: #0f172a;
    
    --accent: #3b82f6;
    --accent-glow: rgba(59, 130, 246, 0.3);
    
    --tag-bg: rgba(255,255,255,0.05);
    --tag-bg-active: var(--accent);
    
    --input-bg: rgba(0,0,0,0.2);
    
    /* Status Colors (Mantidas iguais para ambos os modos) */
    --danger: #ef4444;
    --success: #10b981;
    --warning: #f59e0b;
    
    --radius: 16px;
    --font: 'Plus Jakarta Sans', sans-serif;
    --transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  /* TEMA CLARO (Sobrescreve vari√°veis) */
  [data-theme="light"] {
    --bg-color: #f0f4f8;
    --bg-gradient-1: rgba(59, 130, 246, 0.05);
    --bg-gradient-2: rgba(239, 68, 68, 0.05);
    
    --card-bg: rgba(255, 255, 255, 0.65);
    --card-hover: rgba(255, 255, 255, 0.9);
    --card-border: rgba(0, 0, 0, 0.06);
    
    --text-main: #1e293b;
    --text-muted: #64748b;
    --text-inverse: #ffffff;
    
    --tag-bg: rgba(0,0,0,0.05);
    --input-bg: rgba(255,255,255,0.5);
    
    --accent: #2563eb;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
  
  body {
    font-family: var(--font);
    background-color: var(--bg-color);
    background-image: 
      radial-gradient(circle at 15% 50%, var(--bg-gradient-1), transparent 25%),
      radial-gradient(circle at 85% 30%, var(--bg-gradient-2), transparent 25%);
    color: var(--text-main);
    min-height: 100vh;
    padding: 2rem 1rem;
    transition: background-color var(--transition), color var(--transition);
  }

  .container { max-width: 720px; margin: 0 auto; position: relative; }

  /* ‚îÄ‚îÄ‚îÄ HEADER & THEME TOGGLE ‚îÄ‚îÄ‚îÄ */
  header { 
    margin-bottom: 2rem; 
    display: flex; 
    justify-content: space-between; 
    align-items: flex-start; 
  }
  
  .header-text { flex: 1; }

  h1 { 
    font-size: 2rem; font-weight: 800; letter-spacing: -0.05em; margin-bottom: 0.5rem;
    background: linear-gradient(to right, var(--text-main), var(--text-muted));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    transition: all var(--transition);
  }
  .subtitle { color: var(--text-muted); font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

  /* Bot√£o Toggle */
  .theme-toggle {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    color: var(--text-main);
    width: 44px; height: 44px;
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: var(--transition);
    backdrop-filter: blur(8px);
  }
  .theme-toggle:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  .theme-toggle:active { transform: scale(0.95); }
  .theme-toggle svg { width: 22px; height: 22px; stroke-width: 2; }

  /* ‚îÄ‚îÄ‚îÄ CONTROLS CARD ‚îÄ‚îÄ‚îÄ */
  .controls {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: var(--radius);
    padding: 1.5rem;
    box-shadow: 0 8px 32px rgba(0,0,0,0.05);
    margin-bottom: 2rem;
    transition: background var(--transition), border var(--transition), box-shadow var(--transition);
  }

  /* Search & Filter Row */
  .top-tools { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
  
  .search-box { flex: 1; position: relative; min-width: 200px; }
  .search-box input {
    width: 100%; background: var(--input-bg); border: 1px solid var(--card-border);
    color: var(--text-main); padding: 12px 12px 12px 40px; border-radius: 10px;
    font-size: 0.9rem; transition: var(--transition); font-family: var(--font);
    font-weight: 500;
  }
  .search-box input:focus { 
    border-color: var(--accent); 
    box-shadow: 0 0 0 3px var(--accent-glow); 
    background: var(--card-bg);
  }
  .search-icon {
    position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
    color: var(--text-muted); width: 18px; height: 18px; pointer-events: none;
  }

  /* Tags */
  .filter-tags { display: flex; gap: 0.6rem; flex-wrap: wrap; }
  .tag {
    background: var(--tag-bg); border: 1px solid var(--card-border);
    color: var(--text-muted); padding: 8px 14px; border-radius: 20px;
    font-size: 0.75rem; font-weight: 700; cursor: pointer; 
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    user-select: none;
  }
  .tag:hover { background: var(--card-border); color: var(--text-main); transform: translateY(-1px); }
  .tag.active { 
    background: var(--tag-bg-active); 
    color: white; 
    border-color: var(--tag-bg-active); 
    box-shadow: 0 4px 12px var(--accent-glow); 
    transform: scale(1.05);
  }
  .tag:active { transform: scale(0.95); }

  /* Slider */
  .slider-container { margin-top: 1.8rem; padding: 0 0.5rem; }
  .slider-info { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
  .slider-date-display { color: var(--accent); transition: color var(--transition); }

  .range-wrapper { position: relative; height: 6px; background: var(--tag-bg); border-radius: 10px; margin: 10px 0; transition: background var(--transition); }
  .range-fill { position: absolute; height: 100%; background: var(--accent); border-radius: 10px; z-index: 1; transition: width 0.1s, left 0.1s, background var(--transition); }
  
  .range-input {
    position: absolute; top: -7px; width: 100%; height: 20px;
    appearance: none; background: transparent; pointer-events: none; z-index: 2;
  }
  .range-input::-webkit-slider-thumb {
    appearance: none; pointer-events: all; width: 20px; height: 20px;
    background: #fff; border: 2px solid var(--accent); border-radius: 50%; cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2); margin-top: 1px;
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), border-color var(--transition);
  }
  .range-input::-webkit-slider-thumb:hover { transform: scale(1.3); }
  .range-input:active::-webkit-slider-thumb { transform: scale(1.1); cursor: grabbing; }

  /* ‚îÄ‚îÄ‚îÄ LISTA DE EVENTOS ‚îÄ‚îÄ‚îÄ */
  .event-list { display: flex; flex-direction: column; gap: 0.8rem; padding-bottom: 2rem; }
  
  .event-card {
    display: grid; grid-template-columns: 70px 1fr auto; align-items: stretch;
    background: var(--card-bg); border-radius: 12px; overflow: hidden;
    border: 1px solid transparent;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background var(--transition);
    cursor: default;
    
    /* Anima√ß√£o de Entrada */
    opacity: 0;
    transform: translateY(15px);
    animation: fadeInUp 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }

  /* Hover Effect no Card */
  .event-card:hover { 
    transform: translateY(-3px) scale(1.005); 
    background: var(--card-hover);
    border-color: var(--card-border);
    box-shadow: 0 10px 20px -5px rgba(0,0,0,0.1); 
    z-index: 2;
  }
  .event-card:active { transform: scale(0.98); }

  /* Data Box */
  .date-box {
    background: var(--input-bg); display: flex; flex-direction: column;
    align-items: center; justify-content: center; padding: 0 10px;
    font-size: 1.1rem; font-weight: 800; line-height: 1; color: var(--text-muted);
    transition: background var(--transition), color var(--transition);
  }
  .date-box span { font-size: 0.7rem; font-weight: 600; text-transform: uppercase; opacity: 0.8; margin-top: 4px; }

  .info-box { padding: 14px 18px; display: flex; flex-direction: column; justify-content: center; }
  .event-name { font-weight: 700; font-size: 1rem; margin-bottom: 4px; color: var(--text-main); transition: color var(--transition); }
  .event-disc { font-size: 0.75rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

  /* Tipos de Evento (Visual) */
  .type-indicator { width: 5px; height: 100%; transition: background var(--transition); }
  
  /* Cores por Tipo */
  .type-prova .date-box { color: var(--danger); background: rgba(239, 68, 68, 0.15); }
  .type-prova .type-indicator { background: var(--danger); }
  
  .type-pratica .date-box { color: var(--success); background: rgba(16, 185, 129, 0.15); }
  .type-pratica .type-indicator { background: var(--success); }

  .type-trabalho .date-box { color: var(--accent); background: rgba(59, 130, 246, 0.15); }
  .type-trabalho .type-indicator { background: var(--accent); }

  .type-final .date-box { color: var(--warning); background: rgba(245, 158, 11, 0.15); }
  .type-final .type-indicator { background: var(--warning); }

  /* ‚îÄ‚îÄ‚îÄ STATUS & EMPTY STATES ‚îÄ‚îÄ‚îÄ */
  .status-bar { 
    margin-top: 1rem; text-align: center; font-size: 0.8rem; color: var(--text-muted); 
    background: var(--tag-bg); padding: 8px 16px; border-radius: 99px; display: inline-block;
    transition: background var(--transition);
  }
  .counter { color: var(--text-main); font-weight: 800; margin-right: 4px; }

  .empty-state { 
    text-align: center; padding: 4rem 1rem; color: var(--text-muted); 
    font-size: 0.95rem; font-weight: 500;
    animation: fadeInUp 0.4s ease;
  }

  /* Keyframes */
  @keyframes fadeInUp { from { opacity:0; transform:translateY(15px); } to { opacity:1; transform:translateY(0); } }

  /* Mobile */
  @media (max-width: 480px) {
    h1 { font-size: 1.6rem; }
    .controls { padding: 1.2rem; }
    .event-card { grid-template-columns: 65px 1fr; }
    .type-indicator { display: none; }
    .date-box { border-right: 2px solid transparent; }
    .type-prova .date-box { border-right-color: var(--danger); }
    .type-pratica .date-box { border-right-color: var(--success); }
    .type-trabalho .date-box { border-right-color: var(--accent); }
    .type-final .date-box { border-right-color: var(--warning); }
  }
</style>
</head>
<body>

<div class="container">
  <header>
    <div class="header-text">
      <h1 id="appTitle">Calend√°rio</h1>
      <div class="subtitle" id="appSubtitle">Carregando...</div>
    </div>
    
    <button class="theme-toggle" id="themeBtn" aria-label="Alternar tema">
      <svg class="icon-moon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:block">
        <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
      </svg>
      <svg class="icon-sun" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="display:none">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg>
    </button>
  </header>

  <div class="controls">
    <div class="top-tools">
      <div class="search-box">
        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
        <input type="text" id="searchInput" placeholder="Buscar atividade, mat√©ria..." autocomplete="off">
      </div>
    </div>

    <div class="filter-tags" id="disciplineFilters"></div>

    <div class="slider-container">
      <div class="slider-info">
        <span>Intervalo</span>
        <span class="slider-date-display" id="dateRangeLabel">--</span>
      </div>
      <div class="range-wrapper">
        <div class="range-fill" id="rangeFill"></div>
        <input type="range" class="range-input" id="sliderMin" step="1">
        <input type="range" class="range-input" id="sliderMax" step="1">
      </div>
    </div>
  </div>

  <main id="eventsContainer" class="event-list"></main>
  
  <div style="text-align: center;">
    <div class="status-bar">
      Encontrados <span class="counter" id="countDisplay">0</span> eventos
    </div>
  </div>
</div>

<script>
/**
 * ‚îÄ‚îÄ‚îÄ CONFIGURA√á√ÉO ‚îÄ‚îÄ‚îÄ
 */
const CONFIG = {
  year: 2025,
  semesterStart: '2025-02-01',
  semesterEnd:   '2025-06-30',
  title: "Calend√°rio Acad√™mico",
  subtitle: "Semestre 2025.1",
  
  data: [
    { d: "23/02", disc: "Ortopedia", title: "Semin√°rio 1", type: "trabalho" },
    { d: "02/03", disc: "Ortopedia", title: "Semin√°rio 2", type: "trabalho" },
    { d: "20/04", disc: "Ortopedia", title: "AVT1 ‚Äî Avalia√ß√£o Te√≥rica", type: "prova" },
    { d: "30/03", disc: "Oftalmologia", title: "P1 ‚Äî Multim√≠dia", type: "prova" },
    { d: "27/04", disc: "Oftalmologia", title: "AVT1 ‚Äî Te√≥rica", type: "prova" },
    { d: "04/05", disc: "Oftalmologia", title: "Aula Pr√°tica", type: "pratica" },
    { d: "15/06", disc: "Oftalmologia", title: "P2 ‚Äî Projeto", type: "trabalho" },
    { d: "08/04", disc: "Cl√≠nica M√©dica", title: "AVE1 ‚Äî Avalia√ß√£o Escrita", type: "prova" },
    { d: "11/06", disc: "Cl√≠nica M√©dica", title: "AVE2 ‚Äî Avalia√ß√£o Escrita", type: "prova" },
    { d: "17/06", disc: "Cl√≠nica M√©dica", title: "AVP2 ‚Äî Prova Pr√°tica", type: "final" },
    { d: "10/04", disc: "Ginecologia", title: "B1 ‚Äî Hac GO", type: "pratica" },
    { d: "13/04", disc: "Ginecologia", title: "AV1", type: "prova" },
    { d: "22/06", disc: "Ginecologia", title: "AV2 Final", type: "final" },
    { d: "16/06", disc: "Pediatria", title: "OSCE", type: "prova" }
  ]
};

/**
 * ‚îÄ‚îÄ‚îÄ L√ìGICA ‚îÄ‚îÄ‚îÄ
 */
class App {
  constructor() {
    this.events = [];
    this.startDate = new Date(CONFIG.semesterStart);
    this.endDate = new Date(CONFIG.semesterEnd);
    this.totalDays = Math.ceil((this.endDate - this.startDate) / (1000 * 60 * 60 * 24));
    
    this.state = {
      minVal: 0,
      maxVal: this.totalDays,
      activeDisc: 'Todas',
      searchTerm: ''
    };

    this.init();
  }

  init() {
    document.getElementById('appTitle').innerText = CONFIG.title;
    document.getElementById('appSubtitle').innerText = CONFIG.subtitle;

    // Processa dados e adiciona timestamp para ordena√ß√£o
    this.events = CONFIG.data.map(item => {
      const [day, month] = item.d.split('/').map(Number);
      const dateObj = new Date(CONFIG.year, month - 1, day);
      return { ...item, dateObj, sortTime: dateObj.getTime() };
    }).sort((a, b) => a.sortTime - b.sortTime);

    this.setupTheme();
    this.setupFilters();
    this.setupSlider();
    this.setupSearch();
    this.render();
  }

  // ‚îÄ‚îÄ THEME LOGIC ‚îÄ‚îÄ
  setupTheme() {
    const btn = document.getElementById('themeBtn');
    const moonIcon = btn.querySelector('.icon-moon');
    const sunIcon = btn.querySelector('.icon-sun');
    
    // Verifica localStorage ou prefer√™ncia do sistema
    const savedTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    let isDark = savedTheme ? savedTheme === 'dark' : systemDark;

    const applyTheme = () => {
      document.body.setAttribute('data-theme', isDark ? 'dark' : 'light');
      moonIcon.style.display = isDark ? 'none' : 'block';
      sunIcon.style.display = isDark ? 'block' : 'none';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    };

    // Aplicar estado inicial
    applyTheme();

    btn.addEventListener('click', () => {
      isDark = !isDark;
      applyTheme();
    });
  }

  setupFilters() {
    const uniqueDiscs = ['Todas', ...new Set(this.events.map(e => e.disc))];
    const container = document.getElementById('disciplineFilters');
    
    uniqueDiscs.forEach(disc => {
      const btn = document.createElement('button');
      btn.className = `tag ${disc === 'Todas' ? 'active' : ''}`;
      btn.textContent = disc;
      // Anima√ß√£o leve ao clicar no filtro
      btn.addEventListener('click', (e) => {
        this.state.activeDisc = disc;
        document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
        e.target.classList.add('active');
        this.render();
      });
      container.appendChild(btn);
    });
  }

  setupSlider() {
    const minSlider = document.getElementById('sliderMin');
    const maxSlider = document.getElementById('sliderMax');
    
    [minSlider, maxSlider].forEach(el => {
      el.min = 0;
      el.max = this.totalDays;
      el.oninput = () => this.handleSlider(minSlider, maxSlider);
    });
    minSlider.value = 0;
    maxSlider.value = this.totalDays;
    
    this.handleSlider(minSlider, maxSlider); 
  }

  handleSlider(minEl, maxEl) {
    let min = parseInt(minEl.value);
    let max = parseInt(maxEl.value);

    if (min > max - 1) {
      if (event.target === minEl) minEl.value = max - 1;
      else maxEl.value = min + 1;
    }
    
    this.state.minVal = parseInt(minEl.value);
    this.state.maxVal = parseInt(maxEl.value);

    const percentMin = (this.state.minVal / this.totalDays) * 100;
    const percentMax = (this.state.maxVal / this.totalDays) * 100;
    document.getElementById('rangeFill').style.left = percentMin + "%";
    document.getElementById('rangeFill').style.width = (percentMax - percentMin) + "%";

    const d1 = this.getDateFromOffset(this.state.minVal);
    const d2 = this.getDateFromOffset(this.state.maxVal);
    document.getElementById('dateRangeLabel').innerText = 
      `${this.formatDateShort(d1)} - ${this.formatDateShort(d2)}`;

    this.render(); // Re-renderiza com as novas datas
  }

  setupSearch() {
    document.getElementById('searchInput').addEventListener('input', (e) => {
      this.state.searchTerm = e.target.value.toLowerCase();
      this.render();
    });
  }

  getDateFromOffset(offset) {
    const d = new Date(this.startDate);
    d.setDate(d.getDate() + offset);
    return d;
  }

  formatDateShort(date) {
    return new Intl.DateTimeFormat('pt-BR', { day: '2-digit', month: 'short' }).format(date);
  }
  
  formatDateBox(date) {
    const d = date.getDate().toString().padStart(2, '0');
    const m = new Intl.DateTimeFormat('pt-BR', { month: 'short' }).format(date).replace('.', '');
    return { day: d, month: m };
  }

  render() {
    const container = document.getElementById('eventsContainer');
    
    // Calcula datas do filtro
    const rangeStart = this.getDateFromOffset(this.state.minVal);
    const rangeEnd = this.getDateFromOffset(this.state.maxVal);

    // Filtra dados
    const filtered = this.events.filter(ev => {
      const inDate = ev.dateObj >= rangeStart && ev.dateObj <= rangeEnd;
      const inDisc = this.state.activeDisc === 'Todas' || ev.disc === this.state.activeDisc;
      const inSearch = ev.title.toLowerCase().includes(this.state.searchTerm) || 
                       ev.disc.toLowerCase().includes(this.state.searchTerm);
      return inDate && inDisc && inSearch;
    });

    document.getElementById('countDisplay').innerText = filtered.length;

    // Limpa container
    container.innerHTML = '';

    if (filtered.length === 0) {
      container.innerHTML = `
        <div class="empty-state">
          <div style="font-size: 2rem; margin-bottom:10px;">üçÉ</div>
          Nenhuma atividade encontrada neste per√≠odo.
        </div>`;
      return;
    }

    // Renderiza cards com atraso (stagger) para anima√ß√£o em cascata
    filtered.forEach((ev, index) => {
      const { day, month } = this.formatDateBox(ev.dateObj);
      
      const el = document.createElement('div');
      el.className = `event-card type-${ev.type}`;
      
      // Delay din√¢mico baseado no √≠ndice (max 10 itens para n√£o ficar lento demais)
      const delay = Math.min(index * 0.05, 0.5); 
      el.style.animationDelay = `${delay}s`;

      el.innerHTML = `
        <div class="date-box">
          ${day}
          <span>${month}</span>
        </div>
        <div class="info-box">
          <div class="event-name">${ev.title}</div>
          <div class="event-disc">${ev.disc}</div>
        </div>
        <div class="type-indicator" title="${ev.type}"></div>
      `;
      container.appendChild(el);
    });
  }
}

// Inicializa
window.onload = () => new App();

</script>
</body>
</html>
