<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Calendário Acadêmico Moderno</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
<style>
  /* ─── VARIÁVEIS & RESET ─── */
  :root {
    --bg-color: #0f172a;
    --card-bg: rgba(30, 41, 59, 0.7);
    --card-border: rgba(255, 255, 255, 0.08);
    --accent: #3b82f6; /* Azul moderno */
    --accent-glow: rgba(59, 130, 246, 0.3);
    --text-main: #f1f5f9;
    --text-muted: #94a3b8;
    --danger: #ef4444;
    --success: #10b981;
    --warning: #f59e0b;
    --radius: 16px;
    --font: 'Plus Jakarta Sans', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
  
  body {
    font-family: var(--font);
    background-color: var(--bg-color);
    background-image: 
      radial-gradient(circle at 15% 50%, rgba(59, 130, 246, 0.08), transparent 25%),
      radial-gradient(circle at 85% 30%, rgba(239, 68, 68, 0.05), transparent 25%);
    color: var(--text-main);
    min-height: 100vh;
    padding: 2rem 1rem;
  }

  .container { max-width: 720px; margin: 0 auto; }

  /* ─── HEADER ─── */
  header { margin-bottom: 2rem; text-align: center; }
  h1 { 
    font-size: 2rem; font-weight: 800; letter-spacing: -0.05em; margin-bottom: 0.5rem;
    background: linear-gradient(to right, #fff, #94a3b8);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }
  .subtitle { color: var(--text-muted); font-size: 0.9rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; }

  /* ─── CONTROLS CARD ─── */
  .controls {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    backdrop-filter: blur(12px);
    border-radius: var(--radius);
    padding: 1.5rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    margin-bottom: 2rem;
  }

  /* Search & Filter Row */
  .top-tools { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
  .search-box {
    flex: 1; position: relative; min-width: 200px;
  }
  .search-box input {
    width: 100%; background: rgba(0,0,0,0.2); border: 1px solid var(--card-border);
    color: var(--text-main); padding: 10px 12px 10px 36px; border-radius: 8px;
    font-size: 0.9rem; transition: 0.2s; font-family: var(--font);
  }
  .search-box input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }
  .search-icon {
    position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
    color: var(--text-muted); width: 16px; height: 16px;
  }

  /* Discipline Tags */
  .filter-tags { display: flex; gap: 0.5rem; flex-wrap: wrap; }
  .tag {
    background: rgba(255,255,255,0.05); border: 1px solid var(--card-border);
    color: var(--text-muted); padding: 6px 12px; border-radius: 20px;
    font-size: 0.75rem; font-weight: 600; cursor: pointer; transition: 0.2s;
    user-select: none;
  }
  .tag:hover { background: rgba(255,255,255,0.1); }
  .tag.active { background: var(--accent); color: white; border-color: var(--accent); box-shadow: 0 4px 12px var(--accent-glow); }

  /* Slider Area */
  .slider-container { margin-top: 1.5rem; padding: 0 0.5rem; }
  .slider-info { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.8rem; font-weight: 700; text-transform: uppercase; }
  .slider-date-display { color: var(--accent); }

  .range-wrapper { position: relative; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin: 10px 0; }
  .range-fill { position: absolute; height: 100%; background: var(--accent); border-radius: 10px; z-index: 1; }
  .range-input {
    position: absolute; top: -6px; width: 100%; height: 20px;
    appearance: none; background: transparent; pointer-events: none; z-index: 2;
  }
  .range-input::-webkit-slider-thumb {
    appearance: none; pointer-events: all; width: 18px; height: 18px;
    background: white; border-radius: 50%; cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3); margin-top: 1px;
    transition: transform 0.1s;
  }
  .range-input::-webkit-slider-thumb:hover { transform: scale(1.2); }

  /* ─── LISTA DE EVENTOS ─── */
  .event-list { display: flex; flex-direction: column; gap: 1.5rem; }
  .group-title {
    font-size: 0.85rem; color: var(--text-muted); font-weight: 800; letter-spacing: 0.1em;
    text-transform: uppercase; margin-bottom: 0.5rem; border-bottom: 1px solid var(--card-border);
    padding-bottom: 0.5rem; display: flex; align-items: center; gap: 8px;
  }
  
  .event-card {
    display: grid; grid-template-columns: 70px 1fr auto; align-items: center;
    background: var(--surface2); border-radius: 8px; overflow: hidden;
    margin-bottom: 6px; border: 1px solid transparent;
    transition: transform 0.2s, background 0.2s;
    animation: slideIn 0.3s ease forwards;
  }
  .event-card:hover { transform: translateX(4px); background: rgba(255,255,255,0.03); border-color: var(--card-border); }

  .date-box {
    background: rgba(0,0,0,0.2); height: 100%; display: flex; flex-direction: column;
    align-items: center; justify-content: center; padding: 12px;
    font-size: 0.9rem; font-weight: 700; line-height: 1.1; color: var(--text-muted);
  }
  .date-box span { font-size: 0.7rem; font-weight: 500; text-transform: uppercase; opacity: 0.7; margin-top: 2px; }

  .info-box { padding: 12px 16px; }
  .event-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 2px; }
  .event-disc { font-size: 0.75rem; color: var(--text-muted); }

  /* Tipos de Evento (Cores) */
  .type-indicator {
    width: 4px; height: 25px; border-radius: 4px; margin-right: 12px;
  }
  .type-prova     .date-box { color: var(--danger); background: rgba(239, 68, 68, 0.1); }
  .type-prova     .type-indicator { background: var(--danger); }
  
  .type-pratica   .date-box { color: var(--success); background: rgba(16, 185, 129, 0.1); }
  .type-pratica   .type-indicator { background: var(--success); }

  .type-trabalho  .date-box { color: var(--accent); background: rgba(59, 130, 246, 0.1); }
  .type-trabalho  .type-indicator { background: var(--accent); }

  .type-final     .date-box { color: var(--warning); background: rgba(245, 158, 11, 0.1); }
  .type-final     .type-indicator { background: var(--warning); }

  /* ─── STATUS BAR ─── */
  .status-bar { 
    margin-top: 2rem; text-align: center; font-size: 0.8rem; color: var(--text-muted); 
    background: rgba(0,0,0,0.2); padding: 8px; border-radius: 99px; display: inline-block;
  }
  .counter { color: var(--text-main); font-weight: 700; margin-right: 4px; }

  .hidden { display: none; }
  .empty-state { text-align: center; padding: 3rem; color: var(--text-muted); font-size: 0.9rem; }

  @keyframes slideIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
  
  /* Mobile adjustments */
  @media (max-width: 480px) {
    h1 { font-size: 1.5rem; }
    .event-card { grid-template-columns: 60px 1fr; }
    .type-indicator { display: none; } /* Oculta indicador lateral no mobile para economizar espaço */
  }
</style>
</head>
<body>

<div class="container">
  <header>
    <h1 id="appTitle">Calendário</h1>
    <div class="subtitle" id="appSubtitle">Carregando...</div>
  </header>

  <div class="controls">
    <div class="top-tools">
      <div class="search-box">
        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
        <input type="text" id="searchInput" placeholder="Buscar atividade..." autocomplete="off">
      </div>
    </div>

    <div class="filter-tags" id="disciplineFilters">
      </div>

    <div class="slider-container">
      <div class="slider-info">
        <span>Período</span>
        <span class="slider-date-display" id="dateRangeLabel">Todo o semestre</span>
      </div>
      <div class="range-wrapper">
        <div class="range-fill" id="rangeFill"></div>
        <input type="range" class="range-input" id="sliderMin" step="1">
        <input type="range" class="range-input" id="sliderMax" step="1">
      </div>
    </div>
  </div>

  <main id="eventsContainer" class="event-list"></main>
  
  <div style="text-align: center;">
    <div class="status-bar">
      Exibindo <span class="counter" id="countDisplay">0</span> eventos
    </div>
  </div>
</div>

<script>
/**
 * ─── CONFIGURAÇÃO (EDITE AQUI) ───
 * Aqui você define o ano, as datas limites do semestre e os dados.
 */
const CONFIG = {
  year: 2025,
  semesterStart: '2025-02-01', // Formato YYYY-MM-DD
  semesterEnd:   '2025-06-30',
  title: "Calendário Acadêmico",
  subtitle: "Semestre 2025.1",
  
  // DADOS: Adicione aqui novas disciplinas e eventos.
  // Tipos disponíveis (pela cor): 'prova', 'trabalho', 'pratica', 'final'
  data: [
    // ORTOPEDIA
    { d: "23/02", disc: "Ortopedia", title: "Seminário 1", type: "trabalho" },
    { d: "02/03", disc: "Ortopedia", title: "Seminário 2", type: "trabalho" },
    { d: "20/04", disc: "Ortopedia", title: "AVT1 — Avaliação Teórica", type: "prova" },

    // OFTALMOLOGIA
    { d: "30/03", disc: "Oftalmologia", title: "P1 — Multimídia", type: "prova" },
    { d: "27/04", disc: "Oftalmologia", title: "AVT1 — Teórica", type: "prova" },
    { d: "04/05", disc: "Oftalmologia", title: "Aula Prática", type: "pratica" },
    { d: "15/06", disc: "Oftalmologia", title: "P2 — Projeto", type: "trabalho" },

    // CLÍNICA MÉDICA
    { d: "08/04", disc: "Clínica Médica", title: "AVE1 — Avaliação Escrita", type: "prova" },
    { d: "11/06", disc: "Clínica Médica", title: "AVE2 — Avaliação Escrita", type: "prova" },
    { d: "17/06", disc: "Clínica Médica", title: "AVP2 — Prova Prática", type: "final" },

    // GINECOLOGIA (Subgrupos viram texto no título para simplificar)
    { d: "10/04", disc: "Ginecologia", title: "B1 — Hac GO", type: "pratica" },
    { d: "13/04", disc: "Ginecologia", title: "AV1", type: "prova" },
    { d: "22/06", disc: "Ginecologia", title: "AV2 Final", type: "final" },

    // PEDIATRIA
    { d: "16/06", disc: "Pediatria", title: "OSCE", type: "prova" }
  ]
};

/**
 * ─── LÓGICA DA APLICAÇÃO (NÃO PRECISA EDITAR) ───
 */

class App {
  constructor() {
    this.events = [];
    this.startDate = new Date(CONFIG.semesterStart);
    this.endDate = new Date(CONFIG.semesterEnd);
    this.totalDays = Math.ceil((this.endDate - this.startDate) / (1000 * 60 * 60 * 24));
    
    this.state = {
      minVal: 0,
      maxVal: this.totalDays,
      activeDisc: 'Todas',
      searchTerm: ''
    };

    this.init();
  }

  init() {
    // 1. Setup UI Texts
    document.getElementById('appTitle').innerText = CONFIG.title;
    document.getElementById('appSubtitle').innerText = CONFIG.subtitle;

    // 2. Parse Data
    this.events = CONFIG.data.map(item => {
      const [day, month] = item.d.split('/').map(Number);
      const dateObj = new Date(CONFIG.year, month - 1, day);
      return { ...item, dateObj, sortTime: dateObj.getTime() };
    }).sort((a, b) => a.sortTime - b.sortTime);

    // 3. Setup Controls
    this.setupFilters();
    this.setupSlider();
    this.setupSearch();

    // 4. Initial Render
    this.render();
  }

  setupFilters() {
    const uniqueDiscs = ['Todas', ...new Set(this.events.map(e => e.disc))];
    const container = document.getElementById('disciplineFilters');
    
    uniqueDiscs.forEach(disc => {
      const btn = document.createElement('button');
      btn.className = `tag ${disc === 'Todas' ? 'active' : ''}`;
      btn.textContent = disc;
      btn.onclick = () => {
        this.state.activeDisc = disc;
        document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
        btn.classList.add('active');
        this.render();
      };
      container.appendChild(btn);
    });
  }

  setupSlider() {
    const minSlider = document.getElementById('sliderMin');
    const maxSlider = document.getElementById('sliderMax');
    
    [minSlider, maxSlider].forEach(el => {
      el.min = 0;
      el.max = this.totalDays;
      el.oninput = () => this.handleSlider(minSlider, maxSlider);
    });
    minSlider.value = 0;
    maxSlider.value = this.totalDays;
    
    this.handleSlider(minSlider, maxSlider); // Init visuals
  }

  handleSlider(minEl, maxEl) {
    let min = parseInt(minEl.value);
    let max = parseInt(maxEl.value);

    // Prevent cross-over
    if (min > max - 1) {
      if (event.target === minEl) minEl.value = max - 1;
      else maxEl.value = min + 1;
    }
    
    this.state.minVal = parseInt(minEl.value);
    this.state.maxVal = parseInt(maxEl.value);

    // Update Visuals
    const percentMin = (this.state.minVal / this.totalDays) * 100;
    const percentMax = (this.state.maxVal / this.totalDays) * 100;
    document.getElementById('rangeFill').style.left = percentMin + "%";
    document.getElementById('rangeFill').style.width = (percentMax - percentMin) + "%";

    // Update Label
    const d1 = this.getDateFromOffset(this.state.minVal);
    const d2 = this.getDateFromOffset(this.state.maxVal);
    document.getElementById('dateRangeLabel').innerText = 
      `${this.formatDateShort(d1)} - ${this.formatDateShort(d2)}`;

    this.render();
  }

  setupSearch() {
    document.getElementById('searchInput').addEventListener('input', (e) => {
      this.state.searchTerm = e.target.value.toLowerCase();
      this.render();
    });
  }

  getDateFromOffset(offset) {
    const d = new Date(this.startDate);
    d.setDate(d.getDate() + offset);
    return d;
  }

  formatDateShort(date) {
    return new Intl.DateTimeFormat('pt-BR', { day: '2-digit', month: 'short' }).format(date);
  }
  
  formatDateBox(date) {
    const d = date.getDate().toString().padStart(2, '0');
    const m = new Intl.DateTimeFormat('pt-BR', { month: 'short' }).format(date).replace('.', '');
    return { day: d, month: m };
  }

  render() {
    const container = document.getElementById('eventsContainer');
    container.innerHTML = '';

    // Date Filters
    const rangeStart = this.getDateFromOffset(this.state.minVal);
    const rangeEnd = this.getDateFromOffset(this.state.maxVal);

    // Apply Logic
    const filtered = this.events.filter(ev => {
      const inDate = ev.dateObj >= rangeStart && ev.dateObj <= rangeEnd;
      const inDisc = this.state.activeDisc === 'Todas' || ev.disc === this.state.activeDisc;
      const inSearch = ev.title.toLowerCase().includes(this.state.searchTerm) || 
                       ev.disc.toLowerCase().includes(this.state.searchTerm);
      return inDate && inDisc && inSearch;
    });

    // Render Logic
    if (filtered.length === 0) {
      container.innerHTML = `<div class="empty-state">Nenhum evento encontrado para este filtro.</div>`;
      document.getElementById('countDisplay').innerText = "0";
      return;
    }

    // Grouping by Discipline for cleaner view
    // (Optional: remove this reduce to show a pure chronological list)
    const grouped = {}; 
    // Just sorting chronologically is usually better for "Calendars", 
    // but the user liked groups. Let's do a simple chronological list 
    // but with discipline tags, it's more modern.
    
    filtered.forEach(ev => {
      const { day, month } = this.formatDateBox(ev.dateObj);
      
      const el = document.createElement('div');
      el.className = `event-card type-${ev.type}`;
      el.innerHTML = `
        <div class="date-box">
          ${day}
          <span>${month}</span>
        </div>
        <div class="info-box">
          <div class="event-name">${ev.title}</div>
          <div class="event-disc">${ev.disc}</div>
        </div>
        <div class="type-indicator" title="${ev.type}"></div>
      `;
      container.appendChild(el);
    });

    document.getElementById('countDisplay').innerText = filtered.length;
  }
}

// Start
window.onload = () => new App();

</script>
</body>
</html>
